<html xmlns:c="http://www.concordion.org/2007/concordion">
<title>Creating External Resources</title>

<body>

<h1>Creating external resources</h1>

<div class="examples">
    <div c:execute="clear()" class="example">
        <h3>How can I create an external resource without specifying an ID?</h3>

        <ul>
            <li>Given some resource located at <code>http://www.example.com/titles/path/to/title/resource</code></li>

            <li>When I <b c:set="#method">POST</b>
<pre c:execute="body(#TEXT)">{
    "resource": {
        "ref": "http://www.example.com/titles/path/to/title/resource"
    }
}</pre>
                to <code c:set="#endpoint"><b>/resources</b></code></li>

            <li c:execute="request(#method, #endpoint)">Then the response
                <ol>
                    <li>status should be <b c:assertEquals="status()">201 Created</b>;</li>
                    <li>contains a Location header: <b c:assertEquals="base()">https://{host}/resources/</b>
                        followed by a <b c:assertEquals="uuidQuality()">well-formed UUID</b>;
                    </li>
                    <li>body is <b c:assertEquals="response()"/> (empty).</li>
                </ol>
            </li>
        </ul>
    </div>


    <div c:execute="clear()" class="example">
        <h3>How can I create an external resource with a specific UUID?</h3>

        <ul>
            <li>Given a resource located at <code>http://www.example.com/titles/path/to/title/resource</code>,
                which is to be stored as UUID <code>6e56c868-c0a9-11e4-a762-cb9a664afc01</code>, and <b>no</b> resource
                with that UUID exists yet
            </li>

            <li>When I <b c:set="#method">PUT</b>
<pre c:execute="body(#TEXT)">{
    "resource": {
        "id": "6e56c868-c0a9-11e4-a762-cb9a664afc01",
        "ref": "http://www.example.com/titles/path/to/title/resource"
    }
}</pre>
                to <code c:set="#endpoint"><b>/resources/6e56c868-c0a9-11e4-a762-cb9a664afc01</b></code></li>

            <li c:execute="request(#method, #endpoint)">Then the response
                <ol>
                    <li>status should be <b c:assertEquals="status()">201 Created</b>;</li>
                    <li>contains the Location header <b c:assertEquals="location()">https://{host}/resources/6e56c868-c0a9-11e4-a762-cb9a664afc01</b>
                    </li>
                    <li>body is <b c:assertEquals="response()"/> (empty).</li>
                </ol>
            </li>
        </ul>
    </div>
</div>
</body>
</html>
