<html xmlns:concordion="http://www.concordion.org/2007/concordion">
<body>

<h1>Annotations</h1>

<div class="example">
    <h3>Requirements for adding an annotation to a reference</h3>

    <table>
        <tr>
            <th>Id</th>
            <th>Tag</th>
            <th>Result</th>
            <th>Use case</th>
        </tr>
        <tr concordion:execute="#result = addAnnotation(#id,#tag)">
            <td><span concordion:set="#id"></span><code>""</code></td>
            <td concordion:set="#tag">some annotation</td>
            <td concordion:assertEquals="#result">400 Bad Request</td>
            <td>Add annotation on empty reference id</td>
        </tr>
        <tr concordion:execute="#result = addAnnotation(#id,#tag)">
            <td concordion:set="#id">dpo.8111</td>
            <td><span concordion:set="#tag"></span><code>""</code></td>
            <td concordion:assertEquals="#result">400 Bad Request</td>
            <td>Add empty annotation on valid reference id</td>
        </tr>
        <tr concordion:execute="#result = addAnnotation(#id,#tag)">
            <td concordion:set="#id">dpo.8111</td>
            <td concordion:set="#tag">some annotation</td>
            <td concordion:assertEquals="#result">201 Created</td>
            <td>Add valid annotation on valid reference id</td>
        </tr>
    </table>
</div>

<div class="example">
    <h3>Interaction with existing references</h3>

    <p>Given this reference in the database:</p>

    <table concordion:execute="setUpAnnotation(#id, #tag)">
        <tr>
            <th concordion:set="#id">Id</th>
            <th concordion:set="#tag">Tag</th>
        </tr>
        <tr>
            <td>dpo.8111</td>
            <td>some annotation</td>
        </tr>
    </table>

    <p>Then this happens when trying to add the following annotations:</p>

    <table>
        <tr>
            <th>Id</th>
            <th>Tag</th>
            <th>Result</th>
            <th>Use case</th>
        </tr>
        <tr concordion:execute="#result = addAnnotation(#id,#tag)">
            <td concordion:set="#id">dpo.8111</td>
            <td concordion:set="#tag">some annotation</td>
            <td concordion:assertEquals="#result">409 Conflict</td>
            <td>Add existing annotation (again)</td>
        </tr>
        <tr concordion:execute="#result = addAnnotation(#id,#tag)">
            <td concordion:set="#id">dpo.8111</td>
            <td concordion:set="#tag">another annotation</td>
            <td concordion:assertEquals="#result">201 Created</td>
            <td>Add <i>new</i> annotation to reference with other annotations</td>
        </tr>
        <tr concordion:execute="#result = addAnnotation(#id,#tag)">
            <td concordion:set="#id">dpo.3456</td>
            <td concordion:set="#tag">some annotation</td>
            <td concordion:assertEquals="#result">201 Created</td>
            <td>Add annotation to reference <i>without</i> annotations</td>
        </tr>
    </table>

</div>


</body>
</html>
