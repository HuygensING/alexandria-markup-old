<html xmlns:c="http://www.concordion.org/2007/concordion">
<title>Updating External Resources</title>

<body>

<h1>Updating external resources</h1>

<!--http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html-->
<!--http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success-->

<div class="examples">
    <div c:execute="clear()" class="example">

        <h3>How can I update an external resource by its ID?</h3>

        <p>Given a resource identified by <code>c6b96360-c0c9-11e4-b947-6bc57448d166</code></p>

        <p>When I <b c:set="#method">PUT</b></p>
<pre c:execute="body(#TEXT)">{
    "resource": {
        "id": "c6b96360-c0c9-11e4-b947-6bc57448d166",
        "ref": "http://www.example.com/titles/path/to/UPDATED/title/resource",
        "createdOn": "2015-04-07T11:46:16.871Z"
    }
}</pre>

        <p>to <code c:set="#endpoint"><b>/resources/c6b96360-c0c9-11e4-b947-6bc57448d166</b></code></p>

        <p c:execute="request(#method, #endpoint)">Then:</p>
        <ol>
            <li>the response status should be <b c:assertEquals="status()">204 No Content</b>;</li>
            <li>the response body is <b c:assertEquals="responseOrEmpty()">empty</b>;</li>
            <li><b>TODO</b>: a subsequent GET shows an updated "ref" property in the JSON response body.</li>
        </ol>
    </div>

    <div c:execute="clear()" class="example">
        <h3>What happens when I send an empty PUT request to an existing resource?</h3>
        <h5>Or in other words: will an empty PUT delete an existing resource?</h5>

        <ul>
            <li>Given a resource identified by <code>6e56c868-c0a9-11e4-a762-cb9a664afc01</code></li>

            <li>When I <b c:set="#method">PUT</b>
                <pre c:execute="emptyBody()">&#160;</pre>
                to <code c:set="#endpoint"><b>/resources/6e56c868-c0a9-11e4-a762-cb9a664afc01</b></code>
            </li>

            <li c:execute="request(#method, #endpoint)">Then:
                <ol>
                    <li>the response status should be <b c:assertEquals="status()">400 Bad Request</b>;</li>
                    <li>the response body is <b c:assertEquals="responseOrEmpty()">Missing or empty request body</b>.
                    </li>
                </ol>
            </li>
        </ul>
    </div>

</div>

</body>
</html>
